name: botfriend-cicd
on: push
jobs:
  ci:
    name: CI
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Run tests
        run: make test

      - name: GCR login
        uses: elgohr/gcloud-login-action@v2
        with:
          account_key: ${{ secrets.GCLOUD_KEY }}

      - name: Docker login
        uses: docker/login-action@v2
        with:
          username: ${{ env.username }}
          password: ${{ env.password }}
